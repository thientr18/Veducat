<%- include('./partials/header.ejs'); -%>
<section class="course-announcement">
    <div class="header-menu-name">
        <h2>
            Announcement
        </h2>
    </div>
    <div class="announcement-listed">
        <div class="new-announcement">
            <div class="form-header-announcement">
                <h2 id="new-announcement">
                    Create Announcement
                </h2>
            </div>
            <script>
                document.getElementById("new-announcement").addEventListener("click", function() {
                    document.querySelector(".form-create-announcement").classList.toggle("show");
                });
            </script>
            <div class="form-create-announcement">
                <form action="">
                    <label for="title">Title</label>
                    <input type="text" name="title" id="" placeholder="Title of Announcement" required>
                    <label for="description">Description</label>
                    <textarea placeholder="Type your announcement here..."></textarea>
                    <div class="button-form">
                        <button type="submit">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                        <button type="reset">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <ul>
        </ul>
    </div>
</section>
<script>
    let announcements = '<%- JSON.stringify(announcements) %>';
    announcements = JSON.parse(announcements);
    // SORT ANNOUNCEMENTS BY DATE: newest to oldest
    announcements.sort((a, b) => new Date(b.sentAt).getTime() - new Date(a.sentAt).getTime());

    const announcementList = document.querySelector('.announcement-listed');
    const announcementUl = announcementList.querySelector('ul');

    announcements.forEach(announcement => {
        const li = document.createElement('li');
        const div = document.createElement('div');
        div.classList.add('announcement-container');
        const a = document.createElement('a');
        a.href = '#';
        a.textContent = `${announcement.title}`;
        const description = document.createElement('div');
        description.classList.add('description');
        const span = document.createElement('span');
        span.textContent = `${announcement.content}`;
        description.appendChild(span);
        div.appendChild(a);
        div.appendChild(description);
        li.appendChild(div);
        announcementUl.appendChild(li);
    });
</script>
<%- include('./partials/footer.ejs'); -%>